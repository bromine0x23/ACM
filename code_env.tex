\usepackage{listings}
\usepackage{xcolor}
%\usepackage{dejavu}

\lstdefinestyle{colored_cpp}{
	language=C++,
	basicstyle=\ttfamily\small,
%	keywordstyle=\bfseries,
	keywordstyle=\bfseries\color{blue},
%	commentstyle=\itshape,
	commentstyle=\itshape\color{green!50!black},
%	identifierstyle=\color{black},
%	stringstyle=\color{orange},
	lineskip=0pt,
	aboveskip=0pt,
	belowskip=0pt
}

\lstdefinestyle{colored_ruby}{
	language=Ruby,
	basicstyle=\ttfamily\small,
%	keywordstyle=\bfseries,
	keywordstyle=\bfseries\color{blue},
%	commentstyle=\itshape,
	commentstyle=\itshape\color{green!50!black},
	lineskip=0pt,
	aboveskip=0pt,
	belowskip=0pt
}

\lstset{
	numbers=left,
	tabsize=4,
	frame=lines, %双横线包围
	breaklines=true,
	showstringspaces=true,
	texcl=true,
	escapechar={\%LATEX}, % 使 LATEX 包围部分的中文能被解析
}
\newcommand*{\Path}{}
\newcommand*{\SetPath}[1]{\renewcommand*{\Path}{#1}}
\newcommand*{\CPPSource}[1]{\lstinputlisting[style=colored_cpp,label=source:#1]{\Path/#1.cpp}}
\newcommand*{\RubySource}[1]{\lstinputlisting[style=colored_ruby,label=source:#1]{\Path/#1.rb}}
\newcommand*{\SourceRef}[1]{See page \pageref{#1}}